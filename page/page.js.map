{
  "version": 3,
  "sources": ["../src/ui/strings.js", "../src/utils/utils.js", "../src/api/api.js", "../src/ui/reviewsComments.js", "../src/ui/reviewsRating.js", "../src/ui/reviewsSummaries.js", "../src/ui/reviewsContentBox.js", "../src/ui/ui.js", "../src/main.js", "../src/page.js"],
  "sourcesContent": ["export const noteText = \"\u041E\u0442\u0437\u044B\u0432\u044B \u0430\u0433\u0440\u0435\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0438\u0437 \u043E\u0442\u043A\u0440\u044B\u0442\u044B\u0445 \u0438\u0441\u0442\u043E\u0447\u043D\u0438\u043A\u043E\u0432\"\r\n\r\nexport const loadingText = \"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043C...\";\r\n\r\nconst tip = \"<br/>(\u043E\u0431\u043D\u043E\u0432\u0438\u0442\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u0435)\"\r\n\r\nexport const fewCharactersText = \"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B 3 \u0441\u0438\u043C\u0432\u043E\u043B\u0430 =]\";\r\nexport const unknownTypeText = `<span class=\"error\">\u041D\u0435 \u043F\u043E\u043D\u044F\u0442\u043D\u043E, \u0447\u0442\u043E \u044D\u0442\u043E \u0442\u0430\u043A\u043E\u0435 :|</span>` + tip;\r\n\r\nexport const brokeReviewsText = \"\u041E\u0442\u0437\u044B\u0432\u044B \u043F\u0440\u0438\u0448\u043B\u0438 \u0441\u043B\u043E\u043C\u0430\u043D\u043D\u044B\u0435 =(\" + tip;\r\nexport const brokeSearchText = \"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043F\u0440\u0438\u0448\u043B\u0438 \u0441\u043B\u043E\u043C\u0430\u043D\u043D\u044B\u0435 =(\" + tip;\r\n\r\n/** \u041E\u0448\u0438\u0431\u043A\u0438 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043E\u0442\u0437\u044B\u0432\u043E\u0432 **/\r\nexport function statusReviewsText(status) {\r\n    switch (status) {\r\n        case 0: return `<span class=\"error\">\u0421\u0435\u0440\u0432\u0435\u0440 \u0441 \u043E\u0442\u0437\u044B\u0432\u0430\u043C\u0438 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D =(</span>`;\r\n        case 401: return \"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0432\u043E\u0439\u0434\u0438\u0442\u0435, \u044D\u0442\u043E \u0431\u044B\u0441\u0442\u0440\u043E =)\"\r\n        case 404: return \"\u041E\u0442\u0437\u044B\u0432\u044B \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442 \\\\(O_o)/\";\r\n        default: return `\u0421\u0435\u0440\u0432\u0435\u0440 \u043F\u0440\u0438\u0441\u043B\u0430\u043B \"${status}\" \u0432\u043C\u0435\u0441\u0442\u043E \u043E\u0442\u0437\u044B\u0432\u043E\u0432 =(`\r\n    }\r\n}\r\n\r\n/** \u041E\u0448\u0438\u0431\u043A\u0438 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u043F\u043E\u0438\u0441\u043A\u0430 **/\r\nexport function statusSearchText(status) {\r\n    switch (status) {\r\n        case 0: return `<span class=\"error\">\u0421\u0435\u0440\u0432\u0435\u0440 \u0441 \u043E\u0442\u0437\u044B\u0432\u0430\u043C\u0438 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D =(</span>`;\r\n        case 401: return \"\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0432\u043E\u0439\u0434\u0438\u0442\u0435, \u044D\u0442\u043E \u0431\u044B\u0441\u0442\u0440\u043E =)\"\r\n        case 404: return \"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E \\\\(O_o)/\";\r\n        default: return `\u0421\u0435\u0440\u0432\u0435\u0440 \u043F\u0440\u0438\u0441\u043B\u0430\u043B \"${status}\" \u0432\u043C\u0435\u0441\u0442\u043E \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432 \u043F\u043E\u0438\u0441\u043A\u0430 =(`\r\n    }\r\n}\r\n\r\n/** \u041D\u0430\u0434\u043F\u0438\u0441\u044C \u043E \u043D\u0430\u043B\u0438\u0447\u0438\u0438 \u0442\u043E\u043A\u0435\u043D\u0430 */\r\nexport function authStatusText(isu, name) {\r\n    return name ? `${name} (${isu})` : `${isu}`;\r\n}\r\n\r\n/** \u0418\u043A\u043E\u043D\u043A\u0438 */\r\nexport const symbols = {\"teacher\": \"\uD83D\uDC8E\", \"subject\": \"\uD83D\uDCDA\"};\r\n\r\nexport const authpLabel = `\u042D\u0442\u043E \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F \u043F\u043E <b>ID.ITMO</b> \u0447\u0435\u0440\u0435\u0437 \u043F\u0440\u043E\u043A\u0441\u0438. </br>\r\n\u0415\u0441\u043B\u0438 \u0434\u043E\u0432\u0435\u0440\u044F\u0435\u0442\u0435 \u0441\u0430\u0439\u0442\u0443, \u0432\u0432\u043E\u0434\u0438\u0442\u0435 \u043B\u043E\u0433\u0438\u043D \u0438 \u043F\u0430\u0440\u043E\u043B\u044C. </br> \r\n\u041E\u0434\u043D\u0430\u043A\u043E \u0432\u044B \u0442\u0430\u043A\u0436\u0435 \u043C\u043E\u0436\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C <a href=\"https://github.com/OneTwoZzzPlus/reviews-extension/releases\">\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u0435</a>: \u043E\u043D\u043E \u0441\u0430\u043C\u043E \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0438\u0442, \u043A\u0442\u043E \u0432\u044B!`\r\n\r\nexport const authpError = \"\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u043B\u043E\u0433\u0438\u043D \u0438 \u043F\u0430\u0440\u043E\u043B\u044C!\"", "export function parseJwt(token) {\r\n    try {\r\n        const base64 = token.split('.')[1]\r\n            .replace(/-/g, '+')\r\n            .replace(/_/g, '/');\r\n\r\n        const binary = atob(base64);\r\n        const bytes = Uint8Array.from(binary, c => c.charCodeAt(0));\r\n        const json = new TextDecoder('utf-8').decode(bytes);\r\n\r\n        return JSON.parse(json);\r\n    } catch (e) {\r\n        console.error('\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0430\u0440\u0441\u0438\u043D\u0433\u0430 JWT', e);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport function parseCommentDate(dateStr) {\r\n    if (!dateStr) return -Infinity;\r\n    // \"HH:MM DD.MM.YYYY\"\r\n    const match = dateStr.match(\r\n        /(\\d{2}):(\\d{2})\\s+(\\d{2})\\.(\\d{2})\\.(\\d{4})/\r\n    );\r\n    if (!match) return -Infinity;\r\n    const [, hh, mm, dd, MM, yyyy] = match;\r\n    return new Date(\r\n        Number(yyyy),\r\n        Number(MM) - 1,\r\n        Number(dd),\r\n        Number(hh),\r\n        Number(mm)\r\n    ).getTime();\r\n}\r\n\r\nexport function setCookie(key, value, options = {}) {\r\n    const {\r\n        days = 1,\r\n        path = '/',\r\n        sameSite = 'Lax',\r\n        secure = false\r\n    } = options;\r\n\r\n    let cookie = `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\r\n\r\n    if (days) {\r\n        cookie += `; max-age=${days * 86400}`;\r\n    }\r\n\r\n    cookie += `; path=${path}`;\r\n    cookie += `; SameSite=${sameSite}`;\r\n\r\n    if (secure) {\r\n        cookie += '; Secure';\r\n    }\r\n\r\n    document.cookie = cookie;\r\n}\r\n\r\nexport function getCookie(key) {\r\n    const match = document.cookie\r\n        .split('; ')\r\n        .find(row => row.startsWith(encodeURIComponent(key) + '='));\r\n\r\n    return match\r\n        ? decodeURIComponent(match.split('=')[1])\r\n        : null;\r\n}\r\n", "/** \u041F\u043E\u0434\u043C\u0435\u043D\u044F\u0435\u0442\u0441\u044F \u043D\u0430 \u044D\u0442\u0430\u043F\u0435 \u043A\u043E\u043C\u043F\u0438\u043B\u044F\u0446\u0438\u0438 */\r\n/* global API_HOST */\r\n\r\n/** \u0417\u0430\u0434\u0430\u0451\u0442\u0441\u044F \u0432 \u0441\u0442\u0430\u0440\u0442\u043E\u0432\u043E\u043C \u0444\u0430\u0439\u043B\u0435 \u0438\u0437 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0430 chrome */\r\nexport let jwtToken = null;\r\nexport function setJwtToken(token) {\r\n    jwtToken = token;\r\n}\r\n\r\n/** \u0423\u043D\u0438\u0432\u0435\u0440\u0441\u0430\u043B\u044C\u043D\u0430\u044F \u043E\u0431\u0451\u0440\u0442\u043A\u0430 \u0434\u043B\u044F \u0437\u0430\u043F\u0440\u043E\u0441\u043E\u0432 \u043A API\r\n * @param {string} path\r\n * @param {Object} options\r\n * @param {'GET' | 'POST' | 'PUT' | 'DELETE'} method\r\n * @param {AbortController} [controller]\r\n */\r\nasync function fetchJSON(method, path, options = {}, controller = null) {\r\n    const url = new URL(path, API_HOST);\r\n\r\n    const fetchOptions = {\r\n        method: method.toUpperCase(),\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        signal: controller?.signal\r\n    };\r\n\r\n    if (jwtToken) {\r\n        fetchOptions.headers['token'] = jwtToken;\r\n    }\r\n\r\n    if (fetchOptions.method === 'GET') {\r\n        Object.entries(options).forEach(([key, value]) => {\r\n            url.searchParams.set(key, value.toString());\r\n        });\r\n    } else {\r\n        fetchOptions.body = JSON.stringify(options);\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n        fetch(url, fetchOptions).then(async (res) => {\r\n            if (res.ok) {\r\n                console.log(`[API] fetch resolved`);\r\n                const text = await res.text();\r\n                resolve(text ? JSON.parse(text) : {});\r\n            } else {\r\n                const errorDetail = await res.json().catch(() => ({}));\r\n                if (res.status === 401 || res.status === 404) {\r\n                    console.info('[API] error details:', errorDetail);\r\n                } else {\r\n                    console.error('[API] error details:', errorDetail);\r\n                }\r\n                reject(res.status);\r\n            }\r\n        }).catch((err) => {\r\n            if (err.name !== 'AbortError') {\r\n                console.error('[API] network error:', err);\r\n                reject(0);\r\n            } else {\r\n                console.log(`[API] fetch aborted`);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nexport async function fetchSearch(query, controller) {\r\n    console.log(`[API] send /search for \"${query}\"`);\r\n    return await fetchJSON('GET', '/search', {\"query\": query}, controller)\r\n}\r\n\r\nexport async function fetchTeacher(id) {\r\n    console.log(`[API] send /teacher for \"${id}\"`);\r\n    return await fetchJSON('GET', `/teacher/${id}`, {})\r\n}\r\n\r\nexport async function fetchSubject(id) {\r\n    console.log(`[API] send /subject for \"${id}\"`);\r\n    return await fetchJSON('GET', `/subject/${id}`, {})\r\n}\r\n\r\nexport async function fetchTeacherRate(id, user_rating) {\r\n    console.log(`[API] send /teacher/${id}/rate ${user_rating}`);\r\n    return await fetchJSON('POST', `/teacher/${id}/rate`, {\"user_rating\": user_rating})\r\n}\r\n\r\nexport async function fetchCommentVote(id, user_karma) {\r\n    console.log(`[API] send /comment/${id}/vote ${user_karma}`);\r\n    return await fetchJSON('POST', `/comment/${id}/vote`, {\"user_karma\": user_karma})\r\n}\r\n\r\nexport async function fetchAuthPLogin(username, password) {\r\n    console.log(`[API] send /authp/login`);\r\n    return await fetchJSON('POST', `/authp/login`, {\"username\": username, \"password\": password})\r\n}\r\n", "import {parseCommentDate} from \"../utils/utils.js\";\r\nimport {fetchCommentVote} from \"../api/api.js\";\r\n\r\n\r\n/** \u0421\u043E\u0437\u0434\u0430\u0451\u043C \u0431\u043B\u043E\u043A \u043E\u0442\u0437\u044B\u0432\u043E\u0432\r\n * @param {Array<Comment>} commentsData - \u0414\u0430\u043D\u043D\u044B\u0435 \u0441\u043F\u0438\u0441\u043A\u0430 \u043E\u0442\u0437\u044B\u0432\u043E\u0432\r\n * @returns {HTMLDivElement}\r\n */\r\nexport default function createComments(commentsData) {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.classList.add('comments-wrap');\r\n\r\n    let commentsList = createCommentsList(commentsData);\r\n\r\n    if (commentsData.length > 1) {\r\n        const dropdown = createDropdown(commentsData);\r\n        dropdown.addEventListener(\"change\", (event) => {\r\n            const model = parseInt(event.target.value);\r\n            console.log(`[UI] sorting model ${model}`);\r\n            const newCL = createCommentsList(commentsData, model);\r\n            wrapper.replaceChild(newCL, commentsList);\r\n            commentsList = newCL;\r\n        });\r\n        wrapper.appendChild(dropdown);\r\n    }\r\n    wrapper.appendChild(commentsList);\r\n\r\n    return wrapper;\r\n}\r\n\r\n/** \u0421\u043E\u0437\u0434\u0430\u0451\u043C \u043E\u0442\u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0441\u043F\u0438\u0441\u043E\u043A \u043E\u0442\u0437\u044B\u0432\u043E\u0432\r\n * @param {Array<Comment>} commentsData - \u0414\u0430\u043D\u043D\u044B\u0435 \u0441\u043F\u0438\u0441\u043A\u0430 \u043E\u0442\u0437\u044B\u0432\u043E\u0432\r\n * @param {number} model - \u0420\u0435\u0436\u0438\u043C \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438\r\n */\r\nfunction createCommentsList(commentsData, model = 0) {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.classList.add('comments');\r\n    const sortedCommentsData = sortComments(commentsData, model);\r\n    sortedCommentsData.map(cData => wrapper.append(createComment(cData)));\r\n    return wrapper;\r\n}\r\n\r\n/** \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043E\u0442\u0437\u044B\u0432\u0430\r\n * @param {Comment} comment - \u0414\u0430\u043D\u043D\u044B\u0435 \u043E\u0442\u0437\u044B\u0432\u0430\r\n */\r\nfunction createComment(comment) {\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.classList.add(\"comment\");\r\n    wrapper.innerHTML = `\r\n        <div class=\"comment-head\">\r\n            \u041E\u0442\u0437\u044B\u0432 ${comment.date}\r\n            ${comment?.subject ? ` \u043F\u043E \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0443 \"${comment.subject.title}\"` : ' '}\r\n            ${comment?.source ? ` \u0438\u0441\u0442\u043E\u0447\u043D\u0438\u043A \"<a href=\"${comment.source.link ?? ''}\">${comment.source.title}</a>\"` : ''}\r\n        </div>\r\n        <div>${comment.text}</div>\r\n    `\r\n    wrapper.appendChild(createKarma(comment.id, comment.karma, comment.user_karma));\r\n    return wrapper\r\n}\r\n\r\n/** \u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043F\u0430\u043D\u0435\u043B\u044C\u043A\u0438 \u043A\u0430\u0440\u043C\u044B \u25B2\u25BC\u25B3\u25BD */\r\nfunction createKarma(id, karma, user_karma) {\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.classList.add(\"karma\");\r\n    const karmaSpan = document.createElement(\"span\");\r\n    karmaSpan.classList.add(\"karma-value\");\r\n    const upBtn = document.createElement(\"button\");\r\n    upBtn.classList.add(\"karma-btn\");\r\n    const downBtn = document.createElement(\"button\");\r\n    downBtn.classList.add(\"karma-btn\");\r\n\r\n    upBtn.addEventListener(\"click\", async (_event) => {\r\n        const data = await fetchCommentVote(id, user_karma === 1 ? 0 : 1);\r\n        user_karma = data.user_karma;\r\n        karma = data.karma;\r\n        updateKarma(karmaSpan, upBtn, downBtn, karma, user_karma);\r\n    })\r\n    downBtn.addEventListener(\"click\", async (_event) => {\r\n        const data = await fetchCommentVote(id, user_karma === -1 ? 0 : -1 );\r\n        user_karma = data.user_karma;\r\n        karma = data.karma;\r\n        updateKarma(karmaSpan, upBtn, downBtn, karma, user_karma);\r\n    })\r\n\r\n    updateKarma(karmaSpan, upBtn, downBtn, karma, user_karma)\r\n\r\n    wrapper.appendChild(upBtn);\r\n    wrapper.appendChild(karmaSpan);\r\n    wrapper.appendChild(downBtn);\r\n    return wrapper\r\n}\r\n\r\n/** \u041E\u0431\u043D\u043E\u0432\u043B\u044F\u0435\u043C \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u043F\u0430\u043D\u0435\u043B\u0438 \u043A\u0430\u0440\u043C\u044B */\r\nfunction updateKarma(karmaSpan, upBtn, downBtn, karma, user_karma) {\r\n    if (user_karma === null || user_karma === undefined) user_karma = 0;\r\n    karmaSpan.innerHTML = karma;\r\n    upBtn.innerHTML = user_karma === 1 ? \"\u25B2\" : \"\u25B3\"\r\n    downBtn.innerHTML = user_karma === -1 ? \"\u25BC\" : \"\u25BD\"\r\n}\r\n\r\n/** \u0412\u044B\u043F\u0430\u0434\u0430\u044E\u0449\u0438\u0439 \u0441\u043F\u0438\u0441\u043E\u043A \u043C\u043E\u0434\u0435\u043B\u0435\u0439 \u0441\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0438 */\r\nfunction createDropdown() {\r\n    const wrapper = document.createElement(\"select\");\r\n    wrapper.name = \"sort\";\r\n    wrapper.classList.add(\"comments-dropdown\");\r\n    wrapper.innerHTML = `\r\n        <option value=\"0\">C \u0432\u044B\u0441\u043E\u043A\u043E\u0439 \u043A\u0430\u0440\u043C\u044B</option>\r\n        <option value=\"1\">\u0421 \u043D\u0438\u0437\u043A\u043E\u0439 \u043A\u0430\u0440\u043C\u044B</option>\r\n        <option value=\"2\">\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u043D\u043E\u0432\u044B\u0435</option>\r\n        <option value=\"3\">\u0421\u043D\u0430\u0447\u0430\u043B\u0430 \u0441\u0442\u0430\u0440\u044B\u0435</option>`\r\n    return wrapper;\r\n}\r\n\r\n/** \u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0430 \u043C\u0430\u0441\u0441\u0438\u0432\u0430 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432 \u0441\u043E\u0433\u043B\u0430\u0441\u043D\u043E \u043C\u043E\u0434\u0435\u043B\u0438 */\r\nfunction sortComments(comments, model = 0) {\r\n    return [...comments].sort((a, b) => {\r\n        const timeA = parseCommentDate(a.date);\r\n        const timeB = parseCommentDate(b.date);\r\n        let diff;\r\n        switch (model) {\r\n            case 0:\r\n                diff = b.karma - a.karma;\r\n                if (diff === 0) {\r\n                    if (Number.isNaN(timeA) || Number.isNaN(timeB)) return 0;\r\n                    else return timeB - timeA;\r\n                }\r\n                return diff;\r\n            case 1:\r\n                diff = a.karma - b.karma;\r\n                if (diff === 0) {\r\n                    if (Number.isNaN(timeA) || Number.isNaN(timeB)) return 0;\r\n                    else return timeB - timeA;\r\n                }\r\n                return diff;\r\n            case 2:\r\n                if (Number.isNaN(timeA) || Number.isNaN(timeB)) return 0;\r\n                else return timeB - timeA;\r\n            case 3:\r\n                if (Number.isNaN(timeA) || Number.isNaN(timeB)) return 0;\r\n                else return timeA - timeB;\r\n            default: return 0;\r\n        }\r\n    });\r\n}\r\n", "import {fetchTeacherRate} from \"../api/api.js\";\r\n\r\n\r\n/** \u0421\u043E\u0437\u0434\u0430\u0451\u043C \u0431\u043B\u043E\u043A \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430 */\r\nexport default function createRating(id, rating, user_rating) {\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.classList.add(\"rating-box\")\r\n\r\n    wrapper.innerHTML = renderRating(id, rating, user_rating)\r\n\r\n    wrapper.addEventListener('change', async (event) => {\r\n        if (event.target.name === `rating-${id}`) {\r\n            const newRate = parseInt(event.target.value);\r\n\r\n            const data = await fetchTeacherRate(id, newRate);\r\n            wrapper.innerHTML = renderRating(id, data.rating, data.user_rating);\r\n        }\r\n    });\r\n\r\n    return wrapper;\r\n}\r\n\r\n/** \u0420\u0438\u0441\u0443\u0435\u043C \u0431\u043B\u043E\u043A \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0430 */\r\nfunction renderRating(id, rating, user_rating) {\r\n    if (user_rating === null || user_rating === undefined) user_rating = 0;\r\n    const stars = [5, 4, 3, 2, 1].map(num => `\r\n        <input type=\"radio\" id=\"rate-${id}-${num}\" name=\"rating-${id}\" value=\"${num}\" ${user_rating === num ? 'checked' : ''}>\r\n        <label for=\"rate-${id}-${num}\">\u2605</label>\r\n    `).join('');\r\n\r\n    return `\r\n        <div class=\"rating-row\">\r\n            <span class=\"rating-title\">\u0421\u0440\u0435\u0434\u043D\u044F\u044F \u043E\u0446\u0435\u043D\u043A\u0430:</span>\r\n            <span class=\"rating-value\">${rating}</span>\r\n        </div>\r\n        <div class=\"rating-row\">\r\n            <span class=\"rating-title\">\u0412\u0430\u0448\u0430 \u043E\u0446\u0435\u043D\u043A\u0430:</span>\r\n            <div class=\"rating\">${stars}</div>\r\n        </div>\r\n    `\r\n}\r\n", "/** \u0421\u043E\u0437\u0434\u0430\u0451\u043C \u0431\u043B\u043E\u043A \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440-\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 */\r\nexport default function createSummaries(summariesData) {\r\n    const summariesHTML = summariesData.map(item => `\r\n        <div class=\"summary\">\r\n            <span class=\"summary-title\">${item.title ?? ''}</span>: \r\n            <span class=\"summary-value\">${item.value ?? ''}</span>\r\n        </div>\r\n    `).join('');\r\n\r\n    const summaries = document.createElement('div');\r\n    summaries.classList.add('summaries');\r\n    summaries.innerHTML = summariesHTML;\r\n    return summaries;\r\n}\r\n", "import createComments from \"./reviewsComments.js\";\r\nimport createRating from \"./reviewsRating.js\";\r\nimport createSummaries from \"./reviewsSummaries.js\";\r\n\r\n\r\n/** \u0421\u043E\u0437\u0434\u0430\u0451\u043C \u043A\u043E\u043D\u0442\u0435\u043D\u0442 \u043F\u043E \u043F\u0440\u0435\u043F\u043E\u0434\u0430\u0432\u0430\u0442\u0435\u043B\u044E: \u0440\u0435\u0439\u0442\u0438\u043D\u0433, \u043E\u0442\u0437\u044B\u0432\u044B \u0438 \u043E\u0441\u0442\u0430\u043B\u044C\u043D\u043E\u0435\r\n * @param {Teacher} data\r\n */\r\nexport default function createReviewsContentBox(data) {\r\n    if (!data ||\r\n        !Array.isArray(data.summaries) ||\r\n        !Array.isArray(data.comments) ||\r\n        (data.summaries.length === 0 && data.comments.length === 0)\r\n    ) return null;\r\n\r\n    const wrapper = document.createElement('div');\r\n    wrapper.classList.add(\"reviews-content-box\");\r\n\r\n    wrapper.appendChild(createRating(data.id, data.rating, data?.user_rating));\r\n    if (data.summaries.length !== 0) {\r\n        wrapper.appendChild(createSummaries(data.summaries));\r\n    }\r\n    if (data.comments.length !== 0) {\r\n        wrapper.appendChild(createComments(data.comments));\r\n    }\r\n\r\n    return wrapper;\r\n}\r\n", "import * as strings from \"./strings\";\r\nimport createReviewsContentBox from \"./reviewsContentBox.js\";\r\n\r\n/** \u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u0441\u043D\u0438\u0437\u0443 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B */\r\nconst note = document.createElement(\"p\");\r\nnote.classList.add(\"note\");\r\nnote.innerHTML = strings.noteText;\r\n\r\n/** \u0411\u043B\u043E\u043A \u043E\u0442\u0437\u044B\u0432\u043E\u0432 \u0434\u043B\u044F \u0432\u0441\u0442\u0430\u0432\u043A\u0438 \u043D\u0430 \u0441\u0430\u0439\u0442\r\n * @param {Teacher} data\r\n * */\r\nexport function createInjector(data) {\r\n    const reviewBox = createReviewsContentBox(data);\r\n    if (reviewBox === null) return null;\r\n\r\n    const wrapper = document.createElement('div');\r\n    wrapper.appendChild(reviewBox);\r\n    wrapper.appendChild(note);\r\n\r\n    return wrapper;\r\n}\r\n\r\n/** \u0411\u043B\u043E\u043A \u043E\u0442\u0437\u044B\u0432\u043E\u0432 \u043F\u043E \u0443\u0447\u0438\u0442\u0435\u043B\u044E \u0434\u043B\u044F popup\r\n * @param {Teacher} data\r\n * */\r\nexport function createTeacher(data) {\r\n    const reviewBox = createReviewsContentBox(data);\r\n    if (reviewBox === null) return null;\r\n\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = `<h2>${data.name}</h2>`\r\n    wrapper.appendChild(reviewBox);\r\n    wrapper.appendChild(note);\r\n\r\n    return wrapper;\r\n}\r\n\r\n/** \u0411\u043B\u043E\u043A \u043E\u0442\u0437\u044B\u0432\u043E\u0432 \u043F\u043E \u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0443 \u0434\u043B\u044F popup\r\n * @param {Subject} data\r\n * */\r\nexport function createSubject(data) {\r\n    if (!data || !Array.isArray(data.teachers)) return null;\r\n\r\n    data.teachers.sort((a, b) => {\r\n        const rating = b.rating - a.rating\r\n        if (rating === 0) return b.id - a.id;\r\n        return rating\r\n    });\r\n\r\n    const reviewBoxes = data.teachers.map(teacher => createReviewsContentBox(teacher));\r\n    if (reviewBoxes.some(box => box === null)) return null;\r\n\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = `<h2>${data.title}</h2>`;\r\n    data.teachers.forEach((teacher, i) => {\r\n        const box = document.createElement(\"details\");\r\n        box.innerHTML = `<summary class=\"reviews-title\">${teacher.name}</summary>`;\r\n        box.appendChild(reviewBoxes[i]);\r\n        wrapper.appendChild(box);\r\n    })\r\n    wrapper.appendChild(note);\r\n    return wrapper;\r\n}\r\n\r\n/** \u0411\u043B\u043E\u043A \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432 \u043F\u043E\u0438\u0441\u043A\u0430 \u0434\u043B\u044F popup\r\n * @param {SearchResponse} data\r\n * @param {function} callback\r\n * */\r\nexport function createSearch(data, callback) {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.className = 'search-list';\r\n\r\n    data.results.forEach(s => {\r\n        const item = document.createElement('div');\r\n        item.className = 'search-item';\r\n        item.innerHTML = `\r\n            ${strings.symbols[s.type] || ''}\r\n            ${s.title}\r\n            <span class=\"search-id\">${s.id}</span>\r\n        `;\r\n        item.addEventListener('click', async () => callback(s.id, s.type));\r\n        wrapper.appendChild(item);\r\n    });\r\n\r\n    return wrapper;\r\n}\r\n", "import * as strings from \"./ui/strings.js\";\r\nimport {createSearch, createTeacher, createSubject} from \"./ui/ui.js\";\r\nimport {fetchSearch, fetchTeacher, fetchSubject} from \"./api/api.js\";\r\n\r\nexport let isuBox, container, statusBox;\r\nlet input;\r\nlet timeoutId;\r\nlet abortController;\r\n\r\n\r\n/** \u0421\u043E\u0437\u0434\u0430\u0451\u043C \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441 */\r\nexport function createMainPage() {\r\n    statusBox = document.querySelector('#reviews-status-box');\r\n    isuBox = document.querySelector('#reviews-isu-box');\r\n    container = document.querySelector('#reviews-container');\r\n    input = document.querySelector('#reviews-input');\r\n\r\n    input.addEventListener('input', () => {\r\n        // debouncer\r\n        clearTimeout(timeoutId);\r\n        timeoutId = setTimeout(search, 300);\r\n    });\r\n}\r\n\r\n/** \u041E\u0431\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0435\u043C \u0432\u0432\u043E\u0434 \u0432 \u0441\u0442\u0440\u043E\u043A\u0443 \u043F\u043E\u0438\u0441\u043A\u0430 **/\r\nasync function search() {\r\n    const name = input.value.trim();\r\n    if (!name) {\r\n        statusBox.innerHTML = \"\";\r\n        return;\r\n    } else if (name.length < 3) {\r\n        statusBox.innerHTML = strings.fewCharactersText;\r\n        return;\r\n    }\r\n\r\n    statusBox.innerHTML = strings.loadingText;\r\n\r\n    abortController?.abort();\r\n    abortController = new AbortController();\r\n\r\n    fetchSearch(name, abortController).then(data => {\r\n        const search = createSearch(data, load);\r\n        if (search) {\r\n            statusBox.innerHTML = \"\";\r\n            container.innerHTML = \"\";\r\n            container.appendChild(search);\r\n        } else {\r\n            container.innerHTML = \"\";\r\n            statusBox.innerHTML = strings.brokeSearchText;\r\n        }\r\n    }).catch(status => {\r\n        container.innerHTML = \"\";\r\n        statusBox.innerHTML = strings.statusSearchText(status);\r\n    })\r\n}\r\n\r\n/** \u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043E\u0442\u0437\u044B\u0432\u043E\u0432 \u043F\u043E \u043F\u0440\u0435\u043F\u043E\u0434\u0443/\u043F\u0440\u0435\u0434\u043C\u0435\u0442\u0443 **/\r\nasync function load(id, type) {\r\n    switch (type) {\r\n        case 'teacher':\r\n            fetchTeacher(id).then(data => {\r\n                const teacher = createTeacher(data);\r\n                if (teacher !== null) {\r\n                    container.innerHTML = \"\";\r\n                    container.appendChild(teacher);\r\n                }\r\n                else statusBox.innerHTML = strings.brokeReviewsText;\r\n            }).catch(status => {\r\n                statusBox.innerHTML = strings.statusReviewsText(status);\r\n            })\r\n            break;\r\n        case 'subject':\r\n            fetchSubject(id).then(data => {\r\n                const subject = createSubject(data);\r\n                if (subject !== null) {\r\n                    container.innerHTML = \"\";\r\n                    container.appendChild(subject);\r\n                }\r\n                else statusBox.innerHTML = strings.brokeReviewsText;\r\n            }).catch(status => {\r\n                statusBox.innerHTML = strings.statusReviewsText(status);\r\n            })\r\n            break;\r\n        default:\r\n            console.error(`\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u044B\u0439 type ${type}`);\r\n            statusBox.innerHTML = strings.unknownTypeText;\r\n    }\r\n}\r\n", "'use strict';\r\n\r\nimport {createMainPage, isuBox, container} from \"./main.js\";\r\nimport * as strings from \"./ui/strings.js\";\r\nimport {setJwtToken, jwtToken, fetchAuthPLogin} from \"./api/api.js\";\r\nimport {parseJwt, setCookie, getCookie} from \"./utils/utils.js\";\r\nimport {authpError} from \"./ui/strings.js\";\r\n\r\ndocument.addEventListener('DOMContentLoaded', main);\r\n\r\nasync function main() {\r\n    createMainPage()\r\n    authenticate()\r\n}\r\n\r\nfunction openForm (_) {\r\n    container.innerHTML = \"\";\r\n    container.appendChild(createLoginForm());\r\n}\r\n\r\nfunction authenticate() {\r\n    const token = getCookie('access_token');\r\n    if (token) {\r\n        setJwtToken(token)\r\n        const payload = parseJwt(jwtToken);\r\n        if (payload?.isu) {\r\n            isuBox.innerHTML = strings.authStatusText(payload?.isu, payload?.name);\r\n        }\r\n        isuBox.removeEventListener('click', openForm);\r\n    } else {\r\n        isuBox.addEventListener('click', openForm);\r\n    }\r\n}\r\n\r\nfunction createLoginForm() {\r\n    const form = document.createElement(\"form\");\r\n    form.classList.add(\"login-form\");\r\n    form.innerHTML = `\r\n        <p>${strings.authpLabel}</p>\r\n    \r\n        <input type=\"email\" name=\"email\" placeholder=\"E-mail\" required />\r\n        <input type=\"password\" name=\"password\" placeholder=\"\u041F\u0430\u0440\u043E\u043B\u044C\" required />\r\n    \r\n        <button type=\"submit\">\u0412\u0445\u043E\u0434</button>\r\n    `\r\n    form.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n\r\n        fetchAuthPLogin(form.email.value, form.password.value).then(resp => {\r\n            if (resp?.access_token) setCookie('access_token', resp?.access_token, {secure: true});\r\n            if (resp?.refresh_token) setCookie('refresh_token', resp?.refresh_token, {secure: true});\r\n\r\n            container.innerHTML = \"\";\r\n            authenticate()\r\n        }).catch(status => {\r\n            alert(strings.authpError + ` (\u0441\u0442\u0430\u0442\u0443\u0441 ${status})`);\r\n        });\r\n    });\r\n    return form;\r\n}\r\n"],
  "mappings": "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",
  "names": ["noteText", "loadingText", "tip", "fewCharactersText", "unknownTypeText", "brokeReviewsText", "brokeSearchText", "statusReviewsText", "status", "statusSearchText", "authStatusText", "isu", "name", "symbols", "authpLabel", "authpError", "parseJwt", "token", "base64", "binary", "bytes", "c", "json", "e", "parseCommentDate", "dateStr", "match", "hh", "mm", "dd", "MM", "yyyy", "setCookie", "key", "value", "options", "days", "path", "sameSite", "secure", "cookie", "getCookie", "row", "jwtToken", "setJwtToken", "token", "fetchJSON", "method", "path", "options", "controller", "url", "fetchOptions", "key", "value", "resolve", "reject", "res", "text", "errorDetail", "err", "fetchSearch", "query", "fetchTeacher", "id", "fetchSubject", "fetchTeacherRate", "user_rating", "fetchCommentVote", "user_karma", "fetchAuthPLogin", "username", "password", "createComments", "commentsData", "wrapper", "commentsList", "createCommentsList", "dropdown", "createDropdown", "event", "model", "newCL", "sortComments", "cData", "createComment", "comment", "createKarma", "id", "karma", "user_karma", "karmaSpan", "upBtn", "downBtn", "_event", "data", "fetchCommentVote", "updateKarma", "comments", "a", "b", "timeA", "parseCommentDate", "timeB", "diff", "createRating", "id", "rating", "user_rating", "wrapper", "renderRating", "event", "newRate", "data", "fetchTeacherRate", "stars", "num", "createSummaries", "summariesData", "summariesHTML", "item", "summaries", "createReviewsContentBox", "data", "wrapper", "createRating", "createSummaries", "createComments", "note", "noteText", "createTeacher", "data", "reviewBox", "createReviewsContentBox", "wrapper", "note", "createSubject", "a", "b", "rating", "reviewBoxes", "teacher", "box", "i", "createSearch", "callback", "s", "item", "symbols", "isuBox", "container", "statusBox", "input", "timeoutId", "abortController", "createMainPage", "search", "name", "fewCharactersText", "loadingText", "fetchSearch", "data", "createSearch", "load", "brokeSearchText", "status", "statusSearchText", "id", "type", "fetchTeacher", "teacher", "createTeacher", "brokeReviewsText", "statusReviewsText", "fetchSubject", "subject", "createSubject", "unknownTypeText", "main", "createMainPage", "authenticate", "openForm", "_", "container", "createLoginForm", "token", "getCookie", "setJwtToken", "payload", "parseJwt", "jwtToken", "isuBox", "authStatusText", "form", "authpLabel", "e", "fetchAuthPLogin", "resp", "setCookie", "status", "authpError"]
}
